<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.kronos3.fpp_rust</id>
    <name>FPP</name>
    <vendor>Andrei Tumbar</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lsp</depends>
    <depends>org.jetbrains.plugins.textmate</depends>

    <resource-bundle>messages.FppBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <fileType
                name="FPP"
                implementationClass="com.github.kronos3.fpp_rust.FppFileType"
                fieldName="INSTANCE"
                language="fpp"
                extensions="fpp"/>
        <fileType
                name="FPPI"
                implementationClass="com.github.kronos3.fpp_rust.FppiFileType"
                fieldName="INSTANCE"
                extensions="fppi"/>

        <notificationGroup id="FPP notifications"
                           displayType="BALLOON"
                           key="fpp.notification.group.name"/>

        <!-- Color Settings -->

<!--        <colorSettingsPage implementation="com.github.kronos3.fpp_rust.FppColorSettingsPage"/>-->

        <additionalTextAttributes scheme="Default" file="colors/FppDefault.xml"/>
        <additionalTextAttributes scheme="Darcula" file="colors/FppDarcula.xml"/>
        <additionalTextAttributes scheme="Dark" file="colorSchemes/FppDarcula.xml"/>

        <textmate.bundleProvider implementation="com.github.kronos3.fpp_rust.FppTextMateBundleProvider" />
        <!-- The following two ("editorHighlighterProvider" and "lang.syntaxHighlighterFactory") are required
            because defining a custom file type breaks the association of a TextMate grammar with a file extension.
            https://intellij-support.jetbrains.com/hc/en-us/community/posts/360008202719/comments/8966725380242 -->
        <editorHighlighterProvider
                filetype="FPP"
                implementationClass="org.jetbrains.plugins.textmate.language.syntax.highlighting.TextMateEditorHighlighterProvider"/>
        <lang.syntaxHighlighterFactory
                language="fpp"
                implementationClass="org.jetbrains.plugins.textmate.language.syntax.highlighting.TextMateSyntaxHighlighterFactory"/>
        <editorHighlighterProvider
                filetype="FPPI"
                implementationClass="org.jetbrains.plugins.textmate.language.syntax.highlighting.TextMateEditorHighlighterProvider"/>

        <platform.lsp.serverSupportProvider
                implementation="com.github.kronos3.fpp_rust.FppLspServerSupportProvider"/>
        <applicationService
                serviceImplementation="com.github.kronos3.fpp_rust.settings.FppSettings"/>
        <projectConfigurable
                parentId="language"
                instance="com.github.kronos3.fpp_rust.settings.FppSettingsConfigurable"
                id="settings.fpp"
                displayName="FPP"/>
    </extensions>
</idea-plugin>
